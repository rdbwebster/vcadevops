<!-- extend base layout -->
{% extends "base.html" %}


{% block content %}
<div class="container">
    {% include 'flash.html' %}

<div class="col-lg-8">


<p>
<br>
<h4>
This details the demo runtime environment and major services.

</h4>
<p>

<br>

 <img src="/static/img/devops_env.png" height="454" width="800" />


<div class="center-block">
 <h5><u>Environment Highlights</u></h5>

The DevOps vApp is an Ubuntu VM that hosts the following Servers
<ul>
<li> Jenkins  1.609</li>
<li> Chef  12.0.7_1</li>
<li> Artifactory 3.6.0  </li>
<li> Selenium</li>
</ul>

<br>
The Devops server and the VM's generated by the demo are all accessed through the public gateway.

<br>
All of the VMs can be accessed via ssh and http.
<br>

</div>

<h3>Too few public IP's ?</h3>

<h5>Having fewer public Ip's than VM's is a typical scenario on vCloud Air.</h5>

<br>
<br>
<h4>Routing http </h4>

The IPTables firewall on the devops Vapp will route http based on port.

<pre class="pre-scrollable">
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 8089 -m conntrack --ctstate NEW -j DNAT --to 192.168.109.7:8080
</pre>

<br>
<br>

<h4>Route ssh</h4>

In the client .ssh/config file
<br>
The sshd server on the devops Server acts as a ssh gateway so that remote clients can connect to the VMs.

<pre class="pre-scrollable">
Host devops
  Hostname 23.92.225.171
# next 2 lines for connecting to jenkins directly
# enables this command form -> ssh ubuntu@devops
  User ubuntu
  IdentityFile ~/.ssh/ubuntu_rsa

# For any host on private network behind vca gateway 23.92.225.171->192.168.109.3
# Proxied by ssh on 192.168.109.3 
# enables this command form -> ssh ubuntu@192.168.109.4
Host 192.168.109.*
  User ubuntu
  IdentityFile ~/.ssh/ubuntu_rsa
  ProxyCommand ssh -q jenkins -l ubuntu  -i ~/.ssh/ubuntu_rsa  nc -q0 %h %p

</pre>

</div>
{% endblock %}

